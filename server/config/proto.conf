#Here all nodes are defined. 

define node{
	name:			Manage
	type:			host
	address: 		
	run_dependencies: 	localhost
	on_dependencies:	localhost
	off_dependencies: 	localhost
	on_command:		localhost, amgaa, virsh start Manage
	off_command:		localhost, amgaa, virsh destroy Manage
}

define node{
	name:			localhost
	type:			host
	address: 		
	run_dependencies: 	localhost
	on_dependencies:	localhost
	off_dependencies: 	localhost
	on_command:		localhost, amgaa, echo we are running on the localhost
	off_command:		localhost, amgaa, echo we cannot shutdown localhost
}


# Filesystem servers
define node{
	name:			fs1
	type:			host
	address: 		192.168.0.10
	run_dependencies: 	localhost, RAID1, SW1
	on_dependencies:	localhost, Manage
	off_dependencies:	localhost, Manage
	on_command:		localhost, amgaa, virsh start fs1
	off_command:		localhost, amgaa, virsh destroy fs1
}

define node{
	name:			fs2
	type:			host
	address: 		192.168.0.20
	run_dependencies: 	localhost, RAID2, SW1
	on_dependencies:	localhost, Manage
	off_dependencies:	localhost, Manage
	on_command:		localhost, amgaa, virsh start fs2
	off_command:		localhost, amgaa, virsh destroy fs2
}

define node{
	name:			fs3
	type:			host
	address: 		192.168.0.30
	run_dependencies: 	localhost, RAID3, SW2
	on_dependencies:	localhost, Manage
	off_dependencies:	localhost, Manage
	on_command:		localhost, amgaa, virsh start fs3
	off_command:		localhost, amgaa, virsh destroy fs3
}

define node{
	name:			fs4
	type:			host
	address: 		192.168.0.40
	run_dependencies: 	localhost, RAID4, SW2
	on_dependencies:	localhost, Manage
	off_dependencies:	localhost, Manage
	on_command:		localhost, amgaa, virsh start fs4
	off_command:		localhost, amgaa, virsh destroy fs4
}

# Worker nodes
define node{
	name:			worker11
	type:			service
	address: 		192.168.0.11
	run_dependencies: 	fs1, SW1
	on_dependencies:	fs1
	off_dependencies:	fs1 | fs2 | fs3 | fs4 | Manage
	on_command:		localhost, amgaa, virsh start worker11
	off_command:		localhost, amgaa, virsh destroy worker11
}

define node{
	name:			worker12
	type:			host
	address: 		192.168.0.12
	run_dependencies: 	fs1, SW1
	on_dependencies:	fs1
	off_dependencies:	fs1 | fs2 | fs3 | fs4 | Manage
	on_command:		localhost, amgaa, virsh start worker12
	off_command:		localhost, amgaa, virsh destroy worker
}

define node{
	name:			worker21
	type:			host
	address: 		192.168.0.21
	run_dependencies: 	fs2, SW1
	on_dependencies:	fs2
	off_dependencies: 	fs1 | fs2 | fs3 | fs4 | Manage
	on_command:		localhost, amgaa, virsh start worker21
	off_command:		localhost, amgaa, virsh destroy worker21
}

define node{
	name:			worker22
	type:			host
	address: 		192.168.0.22
	run_dependencies: 	fs2, SW1
	on_dependencies:	fs2
	off_dependencies: 	fs1 | fs2 | fs3 | fs4 | Manage
	on_command:		localhost, amgaa, virsh start worker22
	off_command:		localhost, amgaa, virsh destroy worker22
}

define node{
	name:			worker31
	type:			host
	address: 		192.168.0.31
	run_dependencies: 	fs3, SW2
	on_dependencies:	fs3
	off_dependencies: 	fs1 | fs2 | fs3 | fs4 | Manage
	on_command:		localhost, amgaa, virsh start worker31
	off_command:		localhost, amgaa, virsh destroy worker31
}

define node{
	name:			worker32
	type:			host
	address: 		192.168.0.32
	run_dependencies: 	fs3, SW2
	on_dependencies:	fs3
	off_dependencies: 	fs1 | fs2 | fs3 | fs4 | Manage
	on_command:		localhost, amgaa, virsh start worker32
	off_command:		localhost, amgaa, virsh destroy worker32
}

define node{
	name:			worker41
	type:			host
	address: 		192.168.0.41
	run_dependencies: 	fs4, SW2
	on_dependencies:	fs4
	off_dependencies: 	fs1 | fs2 | fs3 | fs4 | Manage
	on_command:		localhost, amgaa, virsh start worker41
	off_command:		localhost, amgaa, virsh destroy worker41
}

define node{
	name:			worker42
	type:			host
	address: 		192.168.0.42
	run_dependencies: 	fs4, SW2
	on_dependencies:	fs4
	off_dependencies: 	fs1 | fs2 | fs3 | fs4 | Manage
	on_command:		localhost, amgaa, virsh start worker42
	off_command:		localhost, amgaa, virsh destroy worker42
}


# RAIDs
define node{
	name:			RAID1
	type:			RAID
	address: 		
	run_dependencies: 	SW1
	on_dependencies:	Manage
	off_dependencies: 	Manage
	on_command:		localhost, amgaa, virsh start RAID1
	off_command:		localhost, amgaa, virsh destroy RAID1
}

define node{
	name:			RAID2
	type:			RAID
	address: 		
	run_dependencies: 	SW1
	on_dependencies:	Manage
	off_dependencies: 	Manage
	on_command:		localhost, amgaa, virsh start RAID2
	off_command:		localhost, amgaa, virsh destroy RAID2
}

define node{
	name:			RAID3
	type:			RAID
	address: 		
	run_dependencies: 	SW2
	on_dependencies:	Manage
	off_dependencies: 	Manage
	on_command:		localhost, amgaa, virsh start RAID3
	off_command:		localhost, amgaa, virsh destroy RAID3
}

define node{
	name:			RAID4
	type:			RAID
	address: 		
	run_dependencies: 	SW2
	on_dependencies:	Manage
	off_dependencies: 	Manage
	on_command:		localhost, amgaa, virsh start RAID4
	off_command:		localhost, amgaa, virsh destroy RAID4
}


# Switches
define node{
	name:			SW0
	type:			switch
	address: 		
	run_dependencies: 	localhost
	on_dependencies:	Manage
	off_dependencies: 	Manage
	on_command:		localhost, amgaa, virsh start SW0
	off_command:		localhost, amgaa, virsh destroy SW0
}

define node{
	name:			SW1
	type:			switch
	address: 		
	run_dependencies: 	SW0
	on_dependencies:	Manage
	off_dependencies: 	Manage
	on_command:		localhost, amgaa, virsh start SW1
	off_command:		localhost, amgaa, virsh destroy SW1
}

define node{
	name:			SW2
	type:			switch
	address: 		
	run_dependencies: 	SW0
	on_dependencies:	Manage
	off_dependencies: 	Manage
	on_command:		localhost, amgaa, virsh start SW2
	off_command:		localhost, amgaa, virsh destroy SW2
}